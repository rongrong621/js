<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
<script type="text/javascript">
var lastTime = Date.now();
var lastX = 0;
var lastY = 0;
var lastZ = 0;
var RANGE = 60;//频率
var isShake = false;//默认不摇
window.addEventListener('devicemotion', function(e) {
		var nowTime = Date.now();
		//现在的事件-刚才的事件   频率太快 
		if(nowTime - lastTime < 200){
			return;
		}
		var motion = e.accelerationIncludingGravity;
		var x = motion.x;
		var y = motion.y;
		var z = motion.z;
		var range = Math.abs(x-lastX) + Math.abs(y-lastY) + Math.abs(z-lastZ);
		if(range > RANGE){
			isShake = true;//摇了
		}
		if(range < 15 && isShake){
			alert("刚刚进行了摇一摇");
			isShake = false;
		}
		lastX = x;
		lastY = y;
		lastZ = z;
		lastTime = nowTime;
	});	
</script>	
</body>
</html>